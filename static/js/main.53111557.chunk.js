(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,a){e.exports=a(55)},49:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(41),c=a.n(r),o=(a(49),a(2)),m=a(4),u={root:function(){return"/"},about:function(){return"/about"},login:function(){return"/login"},account:function(){return"/account"},recoverPassword:function(){return"/password-recovery"},albums:function(){return"/albums"},album:function(e){return"/albums/".concat(e)},albumPhoto:function(e,t){return"/albums/".concat(e,"/photo/").concat(t)},admin:{root:function(){return"/admin"},users:function(){return"/admin/users"},user:function(e){return"/admin/users/".concat(e)}}},s=a(6),i=a(58);function d(e,t){var a=Object(n.useState)(function(e){try{var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}catch(a){return}}(e)||t),l=Object(s.a)(a,2),r=l[0],c=l[1];return Object(n.useEffect)((function(){!function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)}(e,r)}),[e,r]),[r,c]}var b={en:{APP_NAME:"Hooks",LOGIN_TITLE:"Login",ADMIN_USERS_TITLE:"User list"},es:{APP_NAME:"Ganchos",LOGIN_TITLE:"Entrar",ADMIN_USERS_TITLE:"Usuarios"},ca:{APP_NAME:"Ganxos",LOGIN_TITLE:"Iniciar sessi\xf3",ADMIN_USERS_TITLE:"Usuaris"}},E=Object.keys(b),f=Object(n.createContext)({locale:"en",availableLocales:E,setLocale:function(){}}),p=function(e){var t=e.children,a=d("LOCALE","en"),n=Object(s.a)(a,2),r=n[0],c=n[1];return l.a.createElement(f.Provider,{value:{locale:r,setLocale:c,availableLocales:E}},l.a.createElement(i.a,{locale:"en",messages:b[r]},t))};var v=function(){var e=Object(n.useContext)(f),t=e.locale,a=e.setLocale,r=e.availableLocales;return l.a.createElement("div",{className:"flex pr-4 border-l"},r.map((function(e){return l.a.createElement("button",{key:e,onClick:function(){return a(e)},className:"px-2 border-r border-muted-light uppercase ".concat(e===t?"text-accent":"")},e)})))},h=function(e){var t=e.className,a=void 0===t?"":t;return l.a.createElement("svg",{className:a,viewBox:"0 0 20 20",version:"1.1"},l.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"currentColor",fillRule:"evenodd"},l.a.createElement("g",{id:"icon-shape"},l.a.createElement("path",{d:"M10,2 C14.418278,2 18,5.581722 18,10 C18,14.418278 14.418278,18 10,18 L10,2 Z M10,20 C15.5228475,20 20,15.5228475 20,10 C20,4.4771525 15.5228475,0 10,0 C4.4771525,0 0,4.4771525 0,10 C0,15.5228475 4.4771525,20 10,20 Z",id:"Combined-Shape"}))))},g=Object(n.createContext)({value:"light",toggle:function(){}});function x(){return Object(n.useContext)(g)}var N=function(e){var t=e.children,a=d("THEME","light"),r=Object(s.a)(a,2),c=r[0],o=r[1];Object(n.useEffect)((function(){"light"===c?(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")):(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light"))}),[c]);var m=Object(n.useMemo)((function(){return{value:c,toggle:function(){o("light"===c?"dark":"light")}}}),[c,o]);return l.a.createElement(g.Provider,{value:m},t)},y=function e(t){var a=t.className,n=void 0===a?"":a,r=x();return console.log("RENDER",e.name),l.a.createElement("button",{onClick:r.toggle,className:"".concat(n," flex items-center px-4 rounded-full capitalize")},l.a.createElement(h,{className:"h-4 w-4 mr-2"}),r.value)},O=Object(n.createContext)({user:void 0,setUser:function(){}}),w=function(e){var t=e.children,a=d("USER",void 0),n=Object(s.a)(a,2),r=n[0],c=n[1];return l.a.createElement(O.Provider,{value:{user:r,setUser:c}},t)};function j(){return Object(n.useContext)(O)}var R=a(57),L=function(){var e=Object(R.a)().formatMessage,t=j().user,a=!t,n=t&&t.admin;return l.a.createElement("nav",{className:"text-muted-light flex items-center w-full bg-header border-b py-2"},l.a.createElement("div",{className:"mx-4 flex items-center flex-grow"},l.a.createElement(o.b,{to:"/"},l.a.createElement("h1",{className:"text-xl"},e({id:"APP_NAME"}))),t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{className:"ml-4",to:u.albums()},"Albums")),n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{className:"ml-4",to:u.admin.users()},"Users"))),a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{className:"mx-4",to:u.about()},"About")),l.a.createElement(v,null),l.a.createElement(y,{className:"bg-header hover:bg-page hover:text-default"}),t&&l.a.createElement("div",{className:"mr-8"},l.a.createElement(o.b,{className:"ml-4",to:u.account()},t.name)),a&&l.a.createElement("div",{className:"mr-8"},l.a.createElement(o.b,{className:"ml-4",to:u.login()},"Login")))},I=function(e){var t=e.breadcrumbs,a=void 0===t?[]:t,n=e.children;return l.a.createElement("div",{className:"flex flex-col text-default"},l.a.createElement(L,null),l.a.createElement("div",{className:"container mx-auto my-16 px-4"},l.a.createElement("div",{className:"flex text-muted","data-testid":"breadcrumbs"},a.reduce((function(e,t,a){return a>0&&e.push(l.a.createElement("label",{key:"separator-"+a,className:"px-2"},"/")),t.to?e.push(l.a.createElement(o.b,{key:t.label,className:"text-accent",to:t.to},t.label)):e.push(l.a.createElement("label",{key:t.label},t.label)),e}),[])),n))},P=function(){return l.a.createElement(I,null,"NotFoundPage")},C=function e(){return console.log("RENDER",e.name),l.a.createElement(I,null,l.a.createElement("h1",{className:"text-4xl"},"HomePage"))},k=function e(){return console.log("RENDER",e.name),l.a.createElement(I,{breadcrumbs:[{label:"home",to:u.root()}]},l.a.createElement("h1",{className:"text-4xl"},"AboutPage"))};function S(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],r=a[1],c=Object(n.useState)(""),o=Object(s.a)(c,2),m=o[0],u=o[1];return{value:l,error:m,isValid:function(){var t=e(l);return t?(u(t),!1):(u(""),!0)},handleChange:function(e){r(e.target.value)}}}var U=function(e){return function(t){return t?"":e}},T=function(e){var t=e.onLogin,a=Object(R.a)().formatMessage,n=S(U("Email is required")),r=S(U("Password is required"));return l.a.createElement("form",{"data-testid":"LoginForm",className:"flex flex-col max-w-sm mx-auto bg-card rounded p-4",onSubmit:function(e){e.preventDefault(),[n.isValid(),r.isValid()].every((function(e){return e}))&&t({email:n.value,password:r.value})}},l.a.createElement("h1",{className:"font-medium text-2xl mb-4"},a({id:"LOGIN_TITLE"})),l.a.createElement("div",{className:"py-2 flex flex-col"},l.a.createElement("label",{htmlFor:"email"},"Email"),l.a.createElement("input",{name:"email",type:"text",value:n.value,onChange:n.handleChange,className:"p-2 border border-muted-light bg-page",placeholder:"email@example.com"}),n.error&&l.a.createElement("div",{className:"text-error mt-1"},n.error)),l.a.createElement("div",{className:"py-2 flex flex-col"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{name:"password",type:"password",value:r.value,onChange:r.handleChange,className:"p-2 border border-muted-light my-1 bg-page",placeholder:"Password here"}),r.error&&l.a.createElement("div",{className:"text-error mt-1"},r.error)),l.a.createElement("div",{className:"mt-4 flex items-center"},l.a.createElement("button",{className:"btn",type:"submit"},"Login"),l.a.createElement(o.b,{className:"ml-4",to:u.recoverPassword()},"Forgot password")))},A=a(5),D=a.n(A),_=a(10),M=function(e){return new Promise((function(t){return setTimeout((function(){return t()}),e)}))};function F(){return(F=Object(_.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(250);case 2:return e.abrupt("return",Promise.resolve({name:t.split("@")[0],id:"1",token:"JWT_TOKEN",admin:-1!==t.indexOf("admin")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(_.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(250);case 2:return e.abrupt("return",Promise.resolve({}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z={login:function(e){return function(e,t){return F.apply(this,arguments)}(e.email,e.password)},logout:function(){return function(){return G.apply(this,arguments)}()}},J=function(){var e=j(),t=e.user,a=e.setUser;return t?null:l.a.createElement(I,null,l.a.createElement(T,{onLogin:function(e){return z.login(e).then((function(e){return a(e)}))}}))},H=function e(){var t=x(),a=j(),n=a.user,r=a.setUser;return n?(console.log("RENDER",e.name),l.a.createElement(I,null,l.a.createElement("div",null,l.a.createElement("div",{className:"mb-8"},n.admin&&l.a.createElement("div",{className:"font-medium"},"Administrator"),l.a.createElement("h1",{className:"font-medium text-2xl"},n.name)),l.a.createElement("button",{className:"btn mr-4 capitalize",onClick:t.toggle},t.value),l.a.createElement("button",{className:"btn",onClick:function(){return r()}},"Logout")))):l.a.createElement(m.a,{to:u.login()})},B=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return l.a.createElement("form",{className:"flex flex-col max-w-sm mx-auto bg-card rounded p-4",onSubmit:function(e){return e.preventDefault()}},l.a.createElement("h1",{className:"font-medium text-2xl mb-4"},"Recover password"),l.a.createElement("div",{className:"py-2 flex flex-col"},l.a.createElement("label",null,"Email"),l.a.createElement("input",{className:"p-2 border border-muted-light my-1",type:"text",value:a,onChange:function(e){return r(e.target.value)}})),l.a.createElement("div",{className:"mt-4 flex items-center"},l.a.createElement("button",{className:"btn",type:"submit"},"Send recovery"),l.a.createElement(o.b,{className:"ml-4",to:"/forgot-password"},"Back to login")))},V=function e(){return console.log("RENDER",e.name),l.a.createElement(I,null,l.a.createElement(B,null))},q=function(){return l.a.createElement("div",{className:"spinner w-8 h-8"})},W=function(e){return function(t){return t.map(e)}},Z=function(e){return{id:e.id||"",title:e.title||"",description:e.description||""}},K=function(e){return{id:e.id||"",title:e.title||"",description:e.description||"",photosCount:e.photosCount||""}},Q=function(e){return{id:e.id||"",albumId:e.albumId||"",title:e.title||"",url:e.url||"",thumbnailUrl:e.thumbnailUrl||""}},X=function(e){return{id:e.id||"",name:e.name||"",email:e.email||"",avatarUrl:{thumb:e.avatarUrlThumb||"http://placehold.it/40/aaaaaa"}}},Y=function(e){var t,a,n,l,r,c,o;return{id:e.id||"",name:e.name||"",username:e.username||"",email:e.email||"",address:{street:(null===e||void 0===e||null===(t=e.address)||void 0===t?void 0:t.street)||"",city:(null===e||void 0===e||null===(a=e.address)||void 0===a?void 0:a.city)||"",zipcode:(null===e||void 0===e||null===(n=e.address)||void 0===n?void 0:n.zipcode)||"",geo:{lat:(null===e||void 0===e||null===(l=e.address)||void 0===l||null===(r=l.geo)||void 0===r?void 0:r.lat)||"",lng:(null===e||void 0===e||null===(c=e.address)||void 0===c||null===(o=c.geo)||void 0===o?void 0:o.lng)||""}},phone:e.id||"",website:e.id||"",company:{name:(null===e||void 0===e?void 0:e.company.id)||"",bs:(null===e||void 0===e?void 0:e.company.id)||""}}},$=a(33),ee="production",te="";function ae(){return te?{"x-access-token":te}:{}}var ne={development:{env:ee,apiUrl:"http://localhost:1338"},production:{env:ee,apiUrl:"https://jsonplaceholder.typicode.com"}}[ee].apiUrl;function le(e){return re.apply(this,arguments)}function re(){return(re=Object(_.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.a.get(ne+t,{headers:ae()}).json());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce={albums:{list:function(){return le("/albums").then(W(Z))},get:function(e){return le("/albums/"+e.id).then(K)},photos:{list:function(e){var t=e.albumId;return le("/album/".concat(t,"/photos")).then(W(Q))},get:function(e){e.albumId;var t=e.id;return le("/photos/".concat(t)).then(Q)}}},users:{list:function(){return le("/users").then(W(X))},get:function(e){var t=e.id;return le("/users/".concat(t)).then(Y)}}};function oe(e){var t=Object(n.useState)(void 0),a=Object(s.a)(t,2),l=a[0],r=a[1],c=Object(n.useState)("success"),o=Object(s.a)(c,2),m=o[0],u=o[1];return Object(n.useEffect)((function(){u("loading"),e().then((function(e){r(e),u("success")}))}),[]),{data:l,status:m}}var me=function e(){var t=oe((function(){return ce.albums.list()})),a=t.data,n=t.status;return console.log("RENDER",e.name),l.a.createElement(I,{breadcrumbs:[{label:"home",to:u.root()}]},l.a.createElement("h1",{className:"text-4xl mb-4"},"Albums"),"loading"===n&&l.a.createElement(q,null),a&&a.map((function(e){return l.a.createElement(o.b,{key:e.id,to:u.album(e.id)},l.a.createElement("div",{className:"flex flex-col p-4 my-4 bg-card rounded shadow-sm"},l.a.createElement("h2",{className:"text-accent text-2xl capitalize"},e.title),l.a.createElement("p",{className:"my-4"},e.description)))})))},ue=function(e){var t=e.className,a=e.title,n=e.lorem,r=e.imageUrl,c=e.to;return l.a.createElement("div",{className:"".concat(t," bg-card max-w-xs rounded overflow-hidden shadow-lg mr-4 mb-4")},l.a.createElement("img",{className:"w-full",src:r,alt:a}),l.a.createElement("div",{className:"px-6 py-4"},l.a.createElement("div",{className:"font-bold text-xl mb-2"},c?l.a.createElement(o.b,{to:c},a):a),n&&l.a.createElement("p",{className:"text-gray-700 text-base"},n)))},se=function e(){return console.log("RENDER",e.name),l.a.createElement(I,null,l.a.createElement(q,null))},ie=function e(){var t=Object(m.g)().params,a=oe((function(){return ce.albums.get({id:t.id})})),n=a.data,r=a.status,c=oe((function(){return ce.albums.photos.list({albumId:t.id})})),s=c.data,i=c.status;return console.log("RENDER",e.name,t),"loading"===r&&"loading"===i?l.a.createElement(se,null):l.a.createElement(I,{breadcrumbs:[{label:"home",to:u.root()},{label:"albums",to:u.albums()},{label:"album"}]},l.a.createElement("h1",{className:"text-4xl mb-4"},n&&n.title||"Loading..."),l.a.createElement("div",{className:"flex flex-wrap"},s&&s.map((function(e){return l.a.createElement(o.b,{key:e.id,className:"w-1/5",to:u.albumPhoto(e.albumId,e.id)},l.a.createElement(ue,{title:e.title,imageUrl:e.thumbnailUrl}))}))))},de=function e(){console.log("RENDER",e.name);var t=Object(m.g)().params,a=oe((function(){return ce.albums.get({id:t.albumId})})).data,n=oe((function(){return ce.albums.photos.get({id:t.photoId,albumId:t.albumId})})),r=n.data,c=n.status;return l.a.createElement(I,{breadcrumbs:[{label:"home",to:u.root()},{label:"albums",to:u.albums()},{label:a?a.title:"album",to:u.album(t.albumId)},{label:"photo"}]},l.a.createElement("h1",{className:"text-4xl mb-4"},r?r.title:"Loading..."),"loading"===c&&l.a.createElement(q,null),r&&l.a.createElement("div",null,l.a.createElement("img",{src:r.url,alt:r.title})))},be=function e(){var t=Object(R.a)().formatMessage,a=oe((function(){return ce.users.list()})),n=a.data,r=a.status;return console.log("RENDER",e.name),l.a.createElement(I,{breadcrumbs:[{label:"admin",to:u.admin.root()},{label:"users"}]},l.a.createElement("h1",{className:"text-4xl mb-4"},t({id:"ADMIN_USERS_TITLE"})),l.a.createElement("table",{className:"w-full"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"text-left border-b border-muted"},l.a.createElement("th",{className:"py-2"},"Avatar"),l.a.createElement("th",{className:"py-2"},"Name"),l.a.createElement("th",{className:"py-2"},"Email"))),l.a.createElement("tbody",null,"loading"===r&&l.a.createElement(q,null),n&&n.map((function(e){return l.a.createElement("tr",{className:"border-b border-muted",key:e.id},l.a.createElement("td",{className:"py-2"},l.a.createElement("img",{className:"rounded-full",src:e.avatarUrl.thumb,alt:e.name})),l.a.createElement("td",{className:"py-2"},l.a.createElement(o.b,{to:u.admin.user(e.id),className:"text-accent hover:underline"},e.name)),l.a.createElement("td",{className:"py-2"},e.email))})))))},Ee=function e(){var t=Object(m.g)().params,a=oe((function(){return ce.users.get({id:t.id})})),n=a.data,r=a.status;return console.log("RENDER",e.name,t),"loading"===r?l.a.createElement(se,null):l.a.createElement(I,{breadcrumbs:[{label:"admin",to:u.admin.root()},{label:"users",to:u.admin.users()},{label:"user"}]},l.a.createElement("h1",{className:"text-4xl mb-4"},n&&n.name),l.a.createElement("div",null,n&&n.email))},fe=function e(){return console.log("RENDER",e.name),l.a.createElement(I,{breadcrumbs:[{label:"admin"}]},l.a.createElement("h1",{className:"text-4xl"},"AdminHomePage"))},pe=function e(){return console.log("RENDER",e.name),l.a.createElement(o.a,null,l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:u.about()},l.a.createElement(k,null)),l.a.createElement(m.b,{path:"/admin"},l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:u.admin.root()},l.a.createElement(fe,null)),l.a.createElement(m.b,{exact:!0,path:u.admin.users()},l.a.createElement(be,null)),l.a.createElement(m.b,{exact:!0,path:u.admin.user(":id")},l.a.createElement(Ee,null)),l.a.createElement(m.b,{path:"*"},l.a.createElement(P,null)))),l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:u.root()},l.a.createElement(C,null)),l.a.createElement(m.b,{exact:!0,path:u.account()},l.a.createElement(H,null)),l.a.createElement(m.b,{exact:!0,path:u.albums()},l.a.createElement(me,null)),l.a.createElement(m.b,{exact:!0,path:u.album(":id")},l.a.createElement(ie,null)),l.a.createElement(m.b,{exact:!0,path:u.albumPhoto(":albumId",":photoId")},l.a.createElement(de,null)),l.a.createElement(m.b,{exact:!0,path:u.recoverPassword()},l.a.createElement(V,null)),l.a.createElement(m.b,{exact:!0,to:u.login()},l.a.createElement(J,null))),!1))},ve=function e(){return console.log("RENDER",e.name),l.a.createElement(w,null,l.a.createElement(N,null,l.a.createElement(p,null,l.a.createElement(pe,null))))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(ve,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.53111557.chunk.js.map